{"version":3,"file":"lazy-load-imgs.es.js","sources":["../../src/scripts/constants.ts","../../src/scripts/lazy-observer-options.ts","../../src/scripts/types.d.ts","../../src/scripts/utils.ts","../../src/scripts/lazy.class.ts","../../src/components/lazy-load-imgs.vue","../../src/components/lazy-load-imgs.vue?vue&type=template&lang.js","../../index.ts"],"sourcesContent":["export const DEFAULT_LOADING_IMG =\r\n  'data:image/jpeg;base64,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';\r\n\r\nexport const DEFAULT_ERROR_IMG =\r\n  'data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVFRENBRUZFRUQ0QzExRUY5MDUwRTE1RDhDQThCRUVCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVFRENBRUZERUQ0QzExRUY5MDUwRTE1RDhDQThCRUVCIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUM1NDczNTJFRDQ2MTFFRjk3NUY4MDM3RkM3RjE5OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUM1NDczNTNFRDQ2MTFFRjk3NUY4MDM3RkM3RjE5OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYG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';\r\n\r\nexport const IMG_EXTNAME_LIST = '(jpg|jpeg|gif|png|pneg|bmp|svg|webp)';\r\n","import { DEFAULT_ERROR_IMG, DEFAULT_LOADING_IMG } from '@/scripts/constants';\r\n\r\nimport { ELifecycle, ILazyOptions } from '@/scripts/types';\r\n\r\nexport const lazyOptionsObj: ILazyOptions = {\r\n  loadingImg: DEFAULT_LOADING_IMG,\r\n\r\n  errorImg: DEFAULT_ERROR_IMG,\r\n\r\n  delay: 500,\r\n};\r\n\r\nexport const observerOptionsObj: IntersectionObserverInit = {\r\n  root: null,\r\n\r\n  rootMargin: '0px',\r\n\r\n  threshold: 0,\r\n};\r\n","export interface ILazyOptions {\r\n  loadingImg?: string;\r\n\r\n  errorImg?: string;\r\n\r\n  lifeFunc?: TLifeFunc;\r\n\r\n  delay?: number;\r\n}\r\n\r\nexport enum ELifecycle {\r\n  LOADING = 'loading',\r\n  LOADED = 'loaded',\r\n  ERROR = 'error',\r\n}\r\n\r\nexport type TLifeFunc = {\r\n  [K in ELifecycle]?: (imgEl: HTMLImageElement, ...args: any[]) => any;\r\n};\r\n\r\nexport enum EImgCustAttr {\r\n  IMG_ID = 'data-img-id',\r\n  ORIG_SRC = 'data-orig-src',\r\n  TIMEOUT_ID = 'data-timeout-id',\r\n  LOAD_STATUS = 'data-load-status',\r\n}\r\n\r\nexport type EmitFunc = (event: 'update:modelValue', ...args: any[]) => void;\r\n","import { DEFAULT_LOADING_IMG } from './constants';\r\nimport { EImgCustAttr } from './types';\r\n\r\nexport function hasIntersectionObserver(): boolean {\r\n  if (\r\n    window &&\r\n    'IntersectionObserver' in window &&\r\n    'IntersectionObserverEntry' in window &&\r\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype\r\n  ) {\r\n    if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\r\n      Reflect.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\r\n        get() {\r\n          return this.intersectionRatio > 0;\r\n        },\r\n      });\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function isObject(value: any): value is object {\r\n  return toString.call(value) === '[object Object]';\r\n}\r\n\r\nexport function isArray(value: any): value is Array<any> {\r\n  return toString.call(value) === '[object Array]' || Array.isArray(value);\r\n}\r\n\r\nexport function isFunc(value: any): value is Function {\r\n  return toString.call(value) === '[object Function]' || typeof value === 'function';\r\n}\r\n\r\nexport function isDate(value: any): value is Date {\r\n  return toString.call(value) === '[object Date]' || value instanceof Date;\r\n}\r\n\r\nexport function isRegExp(value: any): value is RegExp {\r\n  return toString.call(value) === '[object RegExp]' || value instanceof RegExp;\r\n}\r\n\r\nexport function isError(value: any): value is Error {\r\n  return toString.call(value) === '[object Error]' || value instanceof Error;\r\n}\r\n\r\nexport function deepCopy(\r\n  obj: any,\r\n\r\n  which: ('object' | 'array' | 'function' | 'date' | 'regexp' | 'error' | 'set' | 'map')[] = [\r\n    'object',\r\n    'array',\r\n    'function',\r\n    'date',\r\n    'regexp',\r\n    'error',\r\n    'set',\r\n    'map',\r\n  ]\r\n) {\r\n  if (obj === null || (typeof obj !== 'object' && typeof obj !== 'function')) return obj;\r\n\r\n  if (isObject(obj) && which.includes('object')) {\r\n    return Object.keys(obj).reduce((newObj, k, i) => {\r\n      newObj[k] = deepCopy(obj[k], which);\r\n      return newObj;\r\n    }, {});\r\n  } else if (isArray(obj) && which.includes('array')) {\r\n    return obj.reduce((arr, v, i) => {\r\n      arr[i] = deepCopy(v, which);\r\n      return arr;\r\n    }, []);\r\n  } else if (isFunc(obj) && which.includes('function')) {\r\n    const newFunc = new Function('return ' + obj.toString())();\r\n\r\n    return newFunc;\r\n  } else if (isDate(obj) && which.includes('date')) {\r\n    return new Date(obj.getTime());\r\n  } else if (isRegExp(obj) && which.includes('regexp')) {\r\n    return new RegExp(obj.source, obj.flags);\r\n  } else if (isError(obj as Error) && which.includes('error')) {\r\n    const errorProps = { ...obj };\r\n\r\n    Object.getOwnPropertyNames(obj).forEach((k) => {\r\n      if (k === 'stack') {\r\n        errorProps[k] = obj[k].split('\\n');\r\n      }\r\n\r\n      if (\r\n        obj.hasOwnProperty('k') &&\r\n        k !== 'message' &&\r\n        k !== 'name' &&\r\n        k !== 'stack' &&\r\n        k !== 'constructor'\r\n      ) {\r\n        errorProps[k] = obj[k];\r\n      }\r\n    });\r\n\r\n    const newError = new Error(obj.message);\r\n    newError.name = obj.name;\r\n    newError.stack = errorProps.stack.join('\\n') + ' ';\r\n\r\n    Object.getOwnPropertyNames(errorProps).forEach((k) => {\r\n      if (!['message', 'name', 'stack'].includes(k)) {\r\n        Reflect.defineProperty(newError, k, Reflect.getOwnPropertyDescriptor(errorProps, k)!);\r\n      }\r\n    });\r\n\r\n    return newError;\r\n  } else if (obj instanceof Set && which.includes('set')) {\r\n    const newSetItems = Array.from(obj).reduce((arr: any[], v: any, i: number) => {\r\n      arr[i] = deepCopy(v, which);\r\n      return arr;\r\n    }, []);\r\n\r\n    const newSet = new Set([...newSetItems]);\r\n    return newSet;\r\n  } else if (obj instanceof Map && which.includes('map')) {\r\n    const map2Obj = Object.fromEntries(obj);\r\n\r\n    const newMap2Obj = deepCopy(map2Obj, which);\r\n\r\n    const newMap = new Map(Object.entries(newMap2Obj));\r\n\r\n    return newMap;\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nexport function createImgObjFromUrl(imgUrl: string): Promise<{ img: HTMLImageElement; err: null | Event }> {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.onload = (e) => resolve({ img, err: null });\r\n    img.onerror = (e) => {\r\n      console.log('Could not load loadingImg at ' + imgUrl);\r\n      reject({ img, err: e });\r\n    };\r\n    img.src = imgUrl;\r\n  });\r\n}\r\n\r\nexport function waitLoadingImg(\r\n  imgUrl: string,\r\n  instId: number\r\n): Promise<{ img: HTMLImageElement; err: null | Event }> {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n\r\n    img.onload = (e) => resolve({ img, err: null });\r\n\r\n    img.onerror = (e) => {\r\n      console.warn(`[lazy-load-imgs]: Could not load loadingImg at ${imgUrl}.\r\nNow using the default base64 encoding format for preloaded images(loadingImg).`);\r\n      img.src = DEFAULT_LOADING_IMG;\r\n\r\n      const allImgs = document.querySelectorAll(`img[${EImgCustAttr.IMG_ID}^=inst${instId}-]`);\r\n\r\n      Array.prototype.forEach.call(allImgs, (img: HTMLImageElement) => {\r\n        img.setAttribute('src', DEFAULT_LOADING_IMG);\r\n      });\r\n\r\n      reject({ img, err: e });\r\n    };\r\n\r\n    img.src = imgUrl;\r\n  });\r\n}\r\n\r\nexport function waitLoadingImg_unused(\r\n  imgUrl: string,\r\n  instId: number,\r\n  attemps = 1,\r\n  timeout = 100\r\n): Promise<{ img: HTMLImageElement; err: null | Event }> {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    let isTimeout = false;\r\n    let attemps_num = 0;\r\n    img.onload = (e) => {\r\n      if (isTimeout && attemps_num < attemps) {\r\n        img.src = imgUrl;\r\n        attemps_num++;\r\n        console.log('onload attemps_num:', attemps_num);\r\n      } else {\r\n        setTimeout(() => {\r\n          console.log('onload success');\r\n          resolve({ img, err: null });\r\n        }, 2000);\r\n      }\r\n    };\r\n    img.onerror = (e) => {\r\n      if (attemps_num < attemps) {\r\n        img.src = imgUrl;\r\n        attemps_num++;\r\n        console.log('onerror attemps_num:', attemps_num);\r\n      } else {\r\n        img.src = DEFAULT_LOADING_IMG;\r\n\r\n        const allImgs = document.querySelectorAll(`img[${EImgCustAttr.IMG_ID}^=inst${instId}-]`);\r\n\r\n        Array.prototype.forEach.call(allImgs, (img: HTMLImageElement) => {\r\n          img.src = DEFAULT_LOADING_IMG;\r\n        });\r\n        console.log('Could not load loadingImg at ' + imgUrl);\r\n      }\r\n    };\r\n    img.src = imgUrl;\r\n    setTimeout(() => {\r\n      isTimeout = true;\r\n    }, timeout);\r\n  });\r\n}\r\n\r\nexport async function url2base64(url: string, imgType = 'image/jpeg'): Promise<string> {\r\n  let base64 = '';\r\n\r\n  const blob = await window\r\n    .fetch(url, {\r\n      headers: {\r\n        'Content-Type': imgType,\r\n      },\r\n    })\r\n    .then((res) => res.blob());\r\n\r\n  const reader = new FileReader();\r\n  reader.readAsArrayBuffer(blob);\r\n  reader.onload = (e) => {\r\n    const buffer = new Uint8Array(e.target!.result as ArrayBuffer);\r\n\r\n    const byteCode = buffer.reduce((prevByte, byte) => {\r\n      prevByte += String.fromCharCode(byte);\r\n      return prevByte;\r\n    }, '');\r\n\r\n    return (base64 = window.btoa(byteCode));\r\n  };\r\n\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(base64);\r\n    }, 10);\r\n  });\r\n}\r\n","import { isVue2, isVue3, VNode } from 'vue-demi';\r\nimport { lazyOptionsObj, observerOptionsObj } from './lazy-observer-options';\r\nimport { EImgCustAttr, ELifecycle, EmitFunc, ILazyOptions } from './types';\r\nimport { deepCopy } from './utils';\r\n\r\nexport class Lazy {\r\n  private _lazyOptions: ILazyOptions = deepCopy(lazyOptionsObj);\r\n\r\n  private _observerOptions: IntersectionObserverInit = deepCopy(observerOptionsObj);\r\n\r\n  private _htmlFieldName: string | undefined;\r\n\r\n  private _imgObserver: IntersectionObserver | null = null;\r\n\r\n  static instId = 0;\r\n\r\n  private _imgId = 1;\r\n\r\n  private _dataImgIdList: string[] = [];\r\n\r\n  private _logMsgPrefix = '[vue-lazyload-imgs]:';\r\n\r\n  private _modelHtmlIdx = 0;\r\n  private _modelHtmlArr: object[] = [];\r\n\r\n  constructor(\r\n    lazyOptions: ILazyOptions,\r\n    observerOptions: IntersectionObserverInit,\r\n    htmlFieldName: string | undefined\r\n  ) {\r\n    Lazy.instId++;\r\n    this._lazyOptions = Object.assign(this._lazyOptions, lazyOptions);\r\n    this._observerOptions = Object.assign(this._observerOptions, observerOptions);\r\n    this._htmlFieldName = htmlFieldName;\r\n  }\r\n\r\n  public setImgSrcToLoadingImg(\r\n    vnodes: VNode[],\r\n    modelValue: string | object[] | undefined,\r\n    emits: EmitFunc\r\n  ): string[] {\r\n    if (Array.isArray(vnodes) && vnodes.length > 0) {\r\n      let dataImgId = '';\r\n\r\n      const imgHtmlReg = new RegExp('<\\\\s*img\\\\s+src\\\\s*=\\\\s*.*(\\\\/)?\\\\s*>', 'gi');\r\n\r\n      let imgsInHtml: string[] | null = null;\r\n\r\n      vnodes.forEach((vnode: any) => {\r\n        if (!vnode.children && typeof vnode.children !== 'string') {\r\n          const vnodeProps = isVue2 ? vnode?.data?.attrs : vnode.props;\r\n\r\n          const vnodeInnerHTMLObj = isVue2 ? vnode?.data?.domProps : vnode.props;\r\n\r\n          const vnodeTag = isVue2 ? vnode.tag : vnode.type;\r\n\r\n          if (vnodeTag === 'img' && vnodeProps) {\r\n            dataImgId = `inst${Lazy.instId}-${this._imgId++}`;\r\n            vnodeProps[EImgCustAttr.IMG_ID] = dataImgId;\r\n\r\n            this._dataImgIdList.push(dataImgId);\r\n\r\n            vnodeProps[EImgCustAttr.ORIG_SRC] = vnodeProps.src;\r\n\r\n            vnodeProps.src = this._lazyOptions.loadingImg;\r\n          } else if (\r\n            vnodeInnerHTMLObj?.innerHTML &&\r\n            (imgsInHtml = vnodeInnerHTMLObj?.innerHTML.match(imgHtmlReg))\r\n          ) {\r\n            imgsInHtml.forEach((img: string) => {\r\n              dataImgId = `inst${Lazy.instId}-${this._imgId++}`;\r\n\r\n              this._dataImgIdList.push(dataImgId);\r\n\r\n              const dataIdAttr = `${EImgCustAttr.IMG_ID}=\"${dataImgId}\"`;\r\n\r\n              const srcVal = img.match(/\\s*src\\s*=\\s*['\"`]?(.*)['\"`].?/i)![1];\r\n\r\n              const origSrcAttr = `${EImgCustAttr.ORIG_SRC}=\"${srcVal}\"`;\r\n\r\n              let newImg = img.replace(/((\\/?)\\s*>)/, ` ${dataIdAttr} ${origSrcAttr} $1`);\r\n\r\n              newImg = newImg.replace(srcVal, this._lazyOptions.loadingImg!);\r\n\r\n              vnodeInnerHTMLObj.innerHTML = vnodeInnerHTMLObj.innerHTML.replace(img, newImg);\r\n            });\r\n\r\n            if (modelValue) {\r\n              if (isVue3 && typeof modelValue === 'string') {\r\n                emits('update:modelValue', vnodeInnerHTMLObj.innerHTML);\r\n              } else if (Array.isArray(modelValue)) {\r\n                if (this._htmlFieldName) {\r\n                  this._modelHtmlArr[this._modelHtmlIdx] = {\r\n                    ...modelValue[this._modelHtmlIdx],\r\n                    [this._htmlFieldName]: vnodeInnerHTMLObj.innerHTML,\r\n                  };\r\n\r\n                  this._modelHtmlIdx++;\r\n                } else if (isVue3) {\r\n                  console.error(`${this._logMsgPrefix} The Props htmlFieldName cannot be empty! \r\nPlease specify, for example:\r\n<LazyLoadImgs htmlFieldName=\"content\">Some HTML tags</LazyLoadImgs>`);\r\n                  return;\r\n                }\r\n              }\r\n            }\r\n\r\n            console.log('modelHtmlArr:', JSON.stringify(this._modelHtmlArr));\r\n          }\r\n        } else {\r\n          this.setImgSrcToLoadingImg(vnode.children as VNode[], modelValue, emits);\r\n        }\r\n      });\r\n\r\n      if (isVue3 && this._modelHtmlArr.length && this._htmlFieldName) {\r\n        emits('update:modelValue', this._modelHtmlArr);\r\n      }\r\n    }\r\n\r\n    return this._dataImgIdList;\r\n  }\r\n\r\n  public createImgObserver(): IntersectionObserver {\r\n    this._imgObserver = new IntersectionObserver(\r\n      (entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {\r\n        entries.forEach(async (entry) => {\r\n          if (entry.isIntersecting) {\r\n            if (this._lazyOptions.delay! > 0) {\r\n              await this._delayIntersectionCallback(entry);\r\n            } else {\r\n              this._intersectionCallback(entry);\r\n            }\r\n          }\r\n        });\r\n      },\r\n      this._observerOptions\r\n    );\r\n\r\n    return this._imgObserver;\r\n  }\r\n\r\n  private _intersectionCallback(entry: IntersectionObserverEntry): void {\r\n    if (entry.isIntersecting) {\r\n      this._imgObserver?.unobserve(entry.target);\r\n\r\n      this._setImgSrc(entry.target as HTMLImageElement);\r\n    }\r\n  }\r\n\r\n  private _delayIntersectionCallback(entry: IntersectionObserverEntry): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      if (entry.isIntersecting) {\r\n        if (entry.target.hasAttribute(EImgCustAttr.TIMEOUT_ID)) return;\r\n\r\n        let timeoutId = setTimeout(() => {\r\n          this._intersectionCallback(entry);\r\n          entry.target.removeAttribute(EImgCustAttr.TIMEOUT_ID);\r\n        }, this._lazyOptions.delay);\r\n        entry.target.setAttribute(EImgCustAttr.TIMEOUT_ID, String(timeoutId));\r\n      } else {\r\n        this.clearLazyTimeout(entry.target);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _setImgSrc(imgEl: HTMLImageElement): void {\r\n    if (imgEl.hasAttribute(EImgCustAttr.ORIG_SRC)) {\r\n      let prevSrc = imgEl.getAttribute('src');\r\n      let origSrc = imgEl.getAttribute(EImgCustAttr.ORIG_SRC);\r\n\r\n      if (prevSrc !== origSrc) {\r\n        this._lifecycle(ELifecycle.LOADING, imgEl);\r\n        imgEl.setAttribute('src', origSrc!);\r\n      }\r\n\r\n      this._listenImgStatus(\r\n        imgEl,\r\n        () => {\r\n          if (imgEl.getAttribute('src') !== this._lazyOptions.errorImg) {\r\n            this._lifecycle(ELifecycle.LOADED, imgEl);\r\n          }\r\n        },\r\n        () => {\r\n          this._imgObserver?.unobserve(imgEl);\r\n          this._lifecycle(ELifecycle.ERROR, imgEl);\r\n\r\n          if (this._lazyOptions.errorImg) {\r\n            const currentImgSrc = imgEl.getAttribute('src');\r\n            if (currentImgSrc !== this._lazyOptions.errorImg) {\r\n              imgEl.setAttribute('src', this._lazyOptions.errorImg);\r\n            }\r\n          }\r\n\r\n          console.error(\r\n            `${this._logMsgPrefix} 图片加载失败，图片 url 地址是：${imgEl.getAttribute(\r\n              EImgCustAttr.ORIG_SRC\r\n            )}`\r\n          );\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  private _listenImgStatus(\r\n    imgEl: HTMLImageElement,\r\n    successCallback: ((this: GlobalEventHandlers, ev: Event) => any) | null,\r\n    errorCallback: OnErrorEventHandler\r\n  ): void {\r\n    imgEl.onload = successCallback;\r\n    imgEl.onerror = errorCallback;\r\n  }\r\n\r\n  public clearLazyTimeout(imgEl: HTMLImageElement | Element): void {\r\n    if (imgEl.hasAttribute(EImgCustAttr.TIMEOUT_ID)) {\r\n      clearTimeout(Number(imgEl.getAttribute(EImgCustAttr.TIMEOUT_ID)));\r\n      imgEl.removeAttribute(EImgCustAttr.TIMEOUT_ID);\r\n    }\r\n  }\r\n\r\n  private _lifecycle(lifecycle: ELifecycle, imgEl: HTMLImageElement): void {\r\n    const { lifeFunc } = this._lazyOptions;\r\n    switch (lifecycle) {\r\n      case ELifecycle.LOADING:\r\n        imgEl.setAttribute(EImgCustAttr.LOAD_STATUS, ELifecycle.LOADING);\r\n\r\n        if (lifeFunc && typeof lifeFunc[ELifecycle.LOADING] === 'function') {\r\n          lifeFunc[ELifecycle.LOADING]?.(imgEl);\r\n        }\r\n        break;\r\n\r\n      case ELifecycle.LOADED:\r\n        imgEl.setAttribute(EImgCustAttr.LOAD_STATUS, ELifecycle.LOADED);\r\n        if (lifeFunc && typeof lifeFunc[ELifecycle.LOADED] === 'function') {\r\n          lifeFunc[ELifecycle.LOADED]?.(imgEl);\r\n        }\r\n        break;\r\n\r\n      case ELifecycle.ERROR:\r\n        imgEl.setAttribute(EImgCustAttr.LOAD_STATUS, ELifecycle.ERROR);\r\n        if (lifeFunc && typeof lifeFunc[ELifecycle.ERROR] === 'function') {\r\n          lifeFunc[ELifecycle.ERROR]?.(imgEl);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"lazyload-all-box\">\r\n    <slot name=\"default\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  onBeforeMount,\r\n  onBeforeUnmount,\r\n  onBeforeUpdate,\r\n  onMounted,\r\n  onUnmounted,\r\n  onUpdated,\r\n  isVue2,\r\n  isVue3,\r\n  type PropType,\r\n  type VNode,\r\n  getCurrentInstance,\r\n  useSlots,\r\n  version as vueVersion,\r\n} from 'vue-demi';\r\n\r\nimport { lazyOptionsObj, observerOptionsObj } from '@/scripts/lazy-observer-options';\r\n\r\nimport { EImgCustAttr, EmitFunc, ILazyOptions } from '@/scripts/types';\r\n\r\nimport { Lazy } from '@/scripts/lazy.class';\r\n\r\nimport { deepCopy, waitLoadingImg } from '@/scripts/utils';\r\n\r\nexport default defineComponent({\r\n  name: 'LazyLoadImgs',\r\n\r\n  props: {\r\n    [isVue2 ? 'value' : 'modelValue']: {\r\n      type: [String, Array] as PropType<string | object[]>,\r\n      required: false,\r\n    },\r\n\r\n    lazyOptions: {\r\n      type: Object as PropType<ILazyOptions>,\r\n      required: false,\r\n      default: () => deepCopy(lazyOptionsObj),\r\n    },\r\n\r\n    observerOptions: {\r\n      type: Object as PropType<IntersectionObserverInit>,\r\n      required: false,\r\n      default: () => deepCopy(observerOptionsObj),\r\n    },\r\n\r\n    htmlFieldName: {\r\n      type: String as PropType<string>,\r\n      required: false,\r\n    },\r\n  },\r\n\r\n  emits: isVue2 ? [] : ['update:modelValue'],\r\n\r\n  setup(props, { emit, attrs }) {\r\n    if (isVue2) {\r\n      console.log('这里是 Vue2 环境...');\r\n    } else if (isVue3) {\r\n      console.log('这里是 Vue3 环境...');\r\n    }\r\n\r\n    const lazyOptions: ILazyOptions = Object.assign({}, lazyOptionsObj, props.lazyOptions);\r\n    const observerOptions: IntersectionObserverInit = Object.assign(\r\n      {},\r\n      observerOptionsObj,\r\n      props.observerOptions\r\n    );\r\n\r\n    let dataImgIdList: string[] = [];\r\n\r\n    // @ts-ignore 以上定义了动态 props.modelValue，所以这里 props.htmlFieldName 会报类型错误，可能是 vscode 或 ts 版本问题导致，忽略该类型报错即可，不影响运行\r\n    const lazy = new Lazy(lazyOptions, observerOptions, props.htmlFieldName);\r\n\r\n    let instId = Lazy.instId;\r\n\r\n    const app = getCurrentInstance();\r\n\r\n    let imgObserver: IntersectionObserver;\r\n\r\n    const getDefaultSlotVnodes = () => {\r\n      let defaultSlotVnodes: VNode[] = [];\r\n\r\n      if (vueVersion.startsWith('2.6')) {\r\n        // @ts-ignore\r\n        let slots = app?.slots;\r\n        defaultSlotVnodes = slots?.default as any;\r\n      } else {\r\n        let slots = useSlots();\r\n        defaultSlotVnodes = slots!.default?.()!;\r\n      }\r\n\r\n      return defaultSlotVnodes;\r\n    };\r\n\r\n    onBeforeMount(() => {\r\n      const defaultSlotVnodes: VNode[] = getDefaultSlotVnodes();\r\n      console.log('default slot vnodes:', defaultSlotVnodes);\r\n\r\n      const modelData = isVue2 ? props.value : props.modelValue;\r\n\r\n      // @ts-ignore 以上定义了动态 props.modelValue，所以这里 modelData 会报类型错误，可能是 vscode 或 ts 版本问题导致，忽略该类型报错即可，不影响运行\r\n      dataImgIdList = lazy.setImgSrcToLoadingImg(defaultSlotVnodes, modelData, emit as EmitFunc);\r\n    });\r\n\r\n    onMounted(async () => {\r\n      imgObserver = lazy.createImgObserver();\r\n\r\n      const allImgs = document.querySelectorAll(`img[${EImgCustAttr.IMG_ID}^=inst${instId}-]`);\r\n\r\n      const { img, err } = await waitLoadingImg(lazyOptions.loadingImg!, instId).catch((err) => err);\r\n\r\n      Array.prototype.forEach.call(allImgs, (imgEl: HTMLImageElement) => imgObserver.observe(imgEl));\r\n    });\r\n\r\n    onBeforeUpdate(() => {});\r\n\r\n    onUpdated(() => {});\r\n\r\n    onBeforeUnmount(() => {\r\n      const delayImgs = document.querySelectorAll(\r\n        `img[${EImgCustAttr.IMG_ID}^=inst${instId}-][${EImgCustAttr.TIMEOUT_ID}]`\r\n      );\r\n      Array.prototype.forEach.call(delayImgs, (imgEl: HTMLImageElement) => lazy.clearLazyTimeout(imgEl));\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      Lazy.instId--;\r\n\r\n      imgObserver.disconnect();\r\n    });\r\n\r\n    return {\r\n      instId,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","\n<div class=\"lazyload-all-box\">\n  <slot name=\"default\"></slot>\n</div>\n","import { type App } from 'vue-demi';\r\nimport LazyLoadImgs from '@/components/lazy-load-imgs.vue';\r\nimport { ILazyOptions } from '@/scripts/types';\r\nimport { lazyOptionsObj } from '@/scripts/lazy-observer-options';\r\n\r\nconst comps = [LazyLoadImgs];\r\n\r\nconst install = (app: App, options: ILazyOptions = {}): any => {\r\n  Object.assign(lazyOptionsObj, options);\r\n\r\n  comps.forEach((comp: any, i: number) => {\r\n    app.component(comp.name, comp);\r\n    console.log('comp.name:', comp.name, comp);\r\n  });\r\n};\r\nexport default install;\r\n\r\nexport { LazyLoadImgs };\r\n"],"names":["DEFAULT_LOADING_IMG","lazyOptionsObj","loadingImg","errorImg","delay","observerOptionsObj","root","rootMargin","threshold","ELifecycle","EImgCustAttr","deepCopy","obj","which","value","toString","call","includes","Object","keys","reduce","newObj","k","i","Array","isArray","arr","v","Function","Date","getTime","RegExp","source","flags","Error","errorProps","getOwnPropertyNames","forEach","split","hasOwnProperty","newError","message","name","stack","join","Reflect","defineProperty","getOwnPropertyDescriptor","Set","newSetItems","from","Map","newMap2Obj","fromEntries","entries","Lazy","_lazyOptions","lazyOptions","observerOptions","htmlFieldName","_observerOptions","_htmlFieldName","_imgObserver","_imgId","_dataImgIdList","_logMsgPrefix","_modelHtmlIdx","_modelHtmlArr","instId","this","assign","vnodes","modelValue","emits","length","dataImgId","imgHtmlReg","imgsInHtml","vnode","children","setImgSrcToLoadingImg","vnodeProps","isVue2","data","attrs","props","vnodeInnerHTMLObj","domProps","tag","type","IMG_ID","push","ORIG_SRC","src","innerHTML","match","img","dataIdAttr","srcVal","origSrcAttr","newImg","replace","isVue3","console","error","IntersectionObserver","observer","async","entry","isIntersecting","_delayIntersectionCallback","_intersectionCallback","unobserve","target","_setImgSrc","Promise","resolve","reject","hasAttribute","TIMEOUT_ID","timeoutId","setTimeout","removeAttribute","setAttribute","String","clearLazyTimeout","imgEl","prevSrc","getAttribute","origSrc","_lifecycle","LOADING","_listenImgStatus","LOADED","ERROR","successCallback","errorCallback","onload","onerror","clearTimeout","Number","lifecycle","lifeFunc","LOAD_STATUS","static","__vue2_script","defineComponent","required","default","emit","lazy","app","getCurrentInstance","imgObserver","onBeforeMount","defaultSlotVnodes","vueVersion","startsWith","slots","useSlots","modelData","onMounted","createImgObserver","allImgs","document","querySelectorAll","imgUrl","Image","e","err","warn","prototype","catch","observe","onBeforeUpdate","onUpdated","onBeforeUnmount","delayImgs","onUnmounted","disconnect","y","_vm","_h","$createElement","_self","_c","staticClass","_t","comps","LazyLoadImgs","install","options","comp","component"],"mappings":"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"}